<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Global Research PDF Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f4; padding:20px; }
    h1 { text-align:center; }
    h2 { margin-top:40px; }
    .card {
      background:#fff;
      padding:15px;
      margin-bottom:15px;
      border-radius:6px;
      box-shadow:0 2px 5px rgba(0,0,0,.1);
    }
    .title { font-weight:bold; font-size:16px; }
    .meta { font-size:13px; color:#555; }
    .btn {
      display:inline-block;
      margin-top:8px;
      padding:7px 12px;
      background:#0a7cff;
      color:#fff;
      text-decoration:none;
      border-radius:4px;
    }
    .badge {
      font-size:11px;
      padding:3px 6px;
      background:#2e7d32;
      color:#fff;
      border-radius:4px;
      margin-left:6px;
    }
  </style>
</head>
<body>

<h1>ðŸ“„ Global Research PDF Hub</h1>

<!-- ================= arXiv ================= -->
<h2>arXiv</h2>
<div id="arxiv">Loadingâ€¦</div>

<!-- ================= ChinaXiv ================= -->
<h2>ChinaXiv</h2>
<div id="chinaxiv">Loadingâ€¦</div>

<!-- ================= DOAJ ================= -->
<h2>DOAJ (Open Access Journals)</h2>
<div id="doaj">Loadingâ€¦</div>

<script>
/* ================= arXiv ================= */
fetch('data/arxiv.xml')
  .then(r => r.text())
  .then(xmlText => {
    const xml = new DOMParser().parseFromString(xmlText, 'text/xml');
    const entries = xml.querySelectorAll('entry');
    const box = document.getElementById('arxiv');
    box.innerHTML = '';

    entries.forEach(e => {
      const title = e.querySelector('title')?.textContent.trim();
      const id = e.querySelector('id')?.textContent;
      const pdf = id.replace('abs', 'pdf') + '.pdf';

      box.innerHTML += `
        <div class="card">
          <div class="title">${title}
            <span class="badge">PDF</span>
          </div>
          <a class="btn" href="${pdf}" target="_blank">Open PDF</a>
        </div>
      `;
    });
  });

/* ================= ChinaXiv ================= */
fetch('data/chinaxiv.xml')
  .then(r => r.text())
  .then(xmlText => {
    const xml = new DOMParser().parseFromString(xmlText, 'text/xml');
    const records = xml.querySelectorAll('record');
    const box = document.getElementById('chinaxiv');
    box.innerHTML = '';

    records.forEach(r => {
      const title = r.querySelector('dc\\:title, title')?.textContent;
      const identifier = r.querySelector('dc\\:identifier, identifier')?.textContent;

      if (identifier && identifier.includes('pdf')) {
        box.innerHTML += `
          <div class="card">
            <div class="title">${title}
              <span class="badge">PDF</span>
            </div>
            <a class="btn" href="${identifier}" target="_blank">Open PDF</a>
          </div>
        `;
      }
    });
  });

/* ================= DOAJ ================= */
fetch('data/doaj.json')
  .then(r => r.json())
  .then(data => {
    const box = document.getElementById('doaj');
    box.innerHTML = '';

    data.results.forEach(item => {
      const title = item.bibjson.title;
      const link = item.bibjson.link?.[0]?.url || '#';

      box.innerHTML += `
        <div class="card">
          <div class="title">${title}</div>
          <div class="meta">Open Access Journal</div>
          <a class="btn" href="${link}" target="_blank">View Article</a>
        </div>
      `;
    });
  });
</script>

</body>
</html>
